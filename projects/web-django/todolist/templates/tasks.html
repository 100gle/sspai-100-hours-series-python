{% extends "base.html" %}

{% block title%}
{{ title }}
{% endblock %}

{% block content %}
<div class="data-table">
  <h1>Tasks</h1>
  {% if not tasks %}
  <p>ğŸ¤” Whoopsâ€¦â€¦ä¼¼ä¹ä»»åŠ¡éƒ½åšå®Œäº†ï¼Ÿé‚£ä¹ˆå¯ä»¥ç‚¹å‡»ä¸‹æ–¹çš„æŒ‰é’®æ·»åŠ ä»»åŠ¡ï¼</p>
  {% else %}
  <table>
    <thead>
      <tr>
        {% for field in fields %}
        <th>{{ field }}</th>
        {% endfor%}
        <th>æ“ä½œ</th>
      </tr>
    </thead>
    <tbody>
      {% for task in tasks %}
      <tr>
        <td>{{ task.id }}</td>
        <td>{{ task.name }}</td>
        <td>
          {% if task.priority == 1 %}
          {{ "ä¸€èˆ¬" }}
          {% elif task.priority == 2 %}
          {{ "ä¼˜å…ˆ" }}
          {% else %}
          {{ "ç´§æ€¥" }}
          {% endif %}
        </td>
        <td class="task-decs">{{ task.description }}</td>
        <td class="task-status">
          {% if task.is_done %}
          {{ "å·²å®Œæˆ" }}
          {% else %}
          {{ "æœªå®Œæˆ" }}
          {% endif %}
        </td>
        <td>{{ task.group.name }}</td>
        <td>
          <div class="ops">
            <span>
              <a href="/tasks/update/{{task.id}}">æ›´æ–°</a>
            </span>
            <span>
              <a href="/tasks/delete/{{task.id}}">åˆ é™¤</a>
            </span>
          </div>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endif %}
<div class="btn-add-task">
  <button>+</button>
</div>
<div class="task-form">
  <form action={% url "create_task" %} method="post" class="form">
    {% csrf_token %}
    <div>
      <label for="taskName">ä»»åŠ¡åç§°ï¼š</label>
      <input type="text" name="taskName" id="taskName" placeholder="è¯·è¾“å…¥å¾…åŠäº‹é¡¹åç§°" />
    </div>
    <div>
      <label for="taskPriority">ä¼˜å…ˆçº§ï¼š</label>
      <select name="taskPriority" id="taskPriority">
        <option value="1" selected>ä¸€èˆ¬</option>
        <option value="2">ä¼˜å…ˆ</option>
        <option value="3">ç´§æ€¥</option>
      </select>
    </div>
    <div>
      <label for="taskGroup"> åˆ†ç»„ï¼š </label>
      <select name="taskGroup" id="taskGroup">
        {% for group in groups %}
        <option value="{{ group.id }}">{{ group.name }}</option>
        {% endfor %}
      </select>
    </div>
    <div>
      <label for="task-textarea">ä»»åŠ¡å¤‡æ³¨ï¼š</label>
      <textarea name="taskDescription" id="task-textarea" rows="5" placeholder="å¤‡æ³¨å†…å®¹ï¼ˆå¯é€‰ï¼‰"></textarea>
    </div>
    <div class="btn-submit">
      <input type="submit" value="æ·»åŠ " />
    </div>
  </form>
</div>
{% endblock %}